# Plan de Pruebas - TelepatÃ­a AI Backend API

## ğŸ¯ Objetivo
Implementar un conjunto mÃ­nimo de pruebas que se ejecuten automÃ¡ticamente en cada commit, cubriendo las funcionalidades crÃ­ticas del proyecto.

## ğŸ“‹ Estructura de ImplementaciÃ³n

### 1. ConfiguraciÃ³n de Entorno de Pruebas
- Instalar dependencias de testing: `pytest`, `pytest-asyncio`, `httpx`, `pytest-mock`
- Crear archivo `requirements-test.txt`
- Configurar `pytest.ini` con configuraciÃ³n bÃ¡sica

### 2. Estructura de Tests
```
tests/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ conftest.py              # Fixtures compartidas
â”œâ”€â”€ test_health.py           # Tests de health endpoints
â”œâ”€â”€ test_text_processing.py  # Tests de procesamiento de texto
â””â”€â”€ test_services.py         # Tests de servicios crÃ­ticos
```

### 3. Tests MÃ­nimos a Implementar

#### **test_health.py** (2 tests)
- âœ… Test GET /health/ping - respuesta exitosa
- âœ… Test GET /health/db_connection - verifica conexiÃ³n

#### **test_text_processing.py** (4 tests)
- âœ… Test validaciÃ³n de texto vÃ¡lido
- âŒ Test validaciÃ³n de texto invÃ¡lido
- âœ… Test simplificaciÃ³n de texto con emojis
- âœ… Test endpoint /message/validate-process-text

#### **test_services.py** (3 tests)
- âœ… Test inicializaciÃ³n de AudioService
- âœ… Test inicializaciÃ³n de GoogleGenAIService
- âœ… Test MessageProcessor bÃ¡sico

### 4. Pre-commit Hook Configuration
- Instalar `pre-commit` framework
- Crear archivo `.pre-commit-config.yaml`
- Configurar hooks para ejecutar tests automÃ¡ticamente
- Agregar validaciones de formato (opcional)

### 5. Git Hooks
- Crear script `.git/hooks/pre-commit` que ejecute pytest
- Tests deben pasar antes de permitir el commit
- Tiempo de ejecuciÃ³n < 10 segundos

## ğŸ› ï¸ Archivos a Crear

1. **requirements-test.txt** - Dependencias de testing
2. **pytest.ini** - ConfiguraciÃ³n de pytest
3. **tests/conftest.py** - Fixtures y configuraciÃ³n global
4. **tests/test_health.py** - Tests de endpoints de salud
5. **tests/test_text_processing.py** - Tests de procesamiento de texto
6. **tests/test_services.py** - Tests de servicios
7. **.pre-commit-config.yaml** - ConfiguraciÃ³n de pre-commit hooks
8. **.github/workflows/tests.yml** (opcional) - CI/CD con GitHub Actions

## ğŸ“Š Criterios de Ã‰xito

- âœ… ~9 tests bÃ¡sicos funcionando
- âœ… Cobertura mÃ­nima del 60% en cÃ³digo crÃ­tico
- âœ… Tests se ejecutan automÃ¡ticamente antes de cada commit
- âœ… Tiempo de ejecuciÃ³n < 10 segundos
- âœ… Si algÃºn test falla, el commit se bloquea

## ğŸš€ Orden de ImplementaciÃ³n

### Fase 1: Setup BÃ¡sico
1. Crear `requirements-test.txt`
2. Crear `pytest.ini`
3. Crear estructura de carpeta `tests/`
4. Crear `conftest.py` con fixtures bÃ¡sicas

### Fase 2: Tests CrÃ­ticos
1. Implementar `test_health.py`
2. Implementar `test_text_processing.py`
3. Implementar `test_services.py`

### Fase 3: AutomatizaciÃ³n
1. Crear `.pre-commit-config.yaml`
2. Configurar git hooks
3. Probar ejecuciÃ³n automÃ¡tica
4. Actualizar README.md con instrucciones

## ğŸ“ Notas
- Usar mocks para servicios externos (MongoDB, Google GenAI, ASR)
- Tests deben ser independientes y no requerir servicios reales
- Mantener tests simples y enfocados en un solo comportamiento
- Evitar tests que dependan de servicios externos sin mock

